<!DOCTYPE html>
<html>
<head>
    <title>Hello WebSocket</title>
    <link href="../webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="../webjars/jquery/jquery.min.js"></script>
    <script src="../webjars/sockjs-client/sockjs.min.js"></script>
    <script src="../webjars/stomp-websocket/stomp.min.js"></script>
    <script>
    	function register(){
    		var request = {
    				'userName':document.getElementById("userName").value,
    				'firstName':document.getElementById("firstName").value,
    				'lastName':document.getElementById("lastName").value,
    				'bio':document.getElementById("bio").value,
    				'password':document.getElementById("password").value
    		}
    		var xmlHttp = new XMLHttpRequest();
    		xmlHttp.onreadystatechange =function(){
    			if (xmlHttp.readyState == 4 && xmlHttp.status == 200){
    				document.cookie="token="+ this.responseText.split('"').join('');
        	        window.location.href = "http://localhost:8080/views/index.html";
    			}
    		}
    		xmlHttp.open("POST","http://localhost:8080/public/users/register",true)
    		xmlHttp.send(JSON.stringify(request));
    	}
    </script>
</head>
<body>
<div class="main container">
	<form>
	  <div class="form-group">
	    <label for="email">UserId</label>
	    <input type="email" class="form-control" id="userName"  placeholder="Enter username">
	    <small id="emailHelp" class="form-text text-muted">Select a username eg- joeSmith</small>
	  </div>
	  <div class="form-group">
	    <label for="password">Password</label>
	    <input type="password" class="form-control" id="password" placeholder="Password">
	  </div>
	 <div class="form-group">
	    <label for="firstName">First Name</label>
	    <input type="text" class="form-control" id="firstName" placeholder="Your first Name">
	  </div>
	  <div class="form-group">
	    <label for="lastName">Last Name</label>
	    <input type="text" class="form-control" id="lastName" placeholder="Your Last Name">
	  </div>
	  <div class="form-group">
	    <label for="bio">Add a bio here</label>
	    <input type="text" class="form-control" id="bio" placeholder="What you do / introduce yourself">
	  </div>
	  <button type="button" class="btn btn-primary" onclick="register()">Register</button>
	</form>
</div>
</body>
</html>